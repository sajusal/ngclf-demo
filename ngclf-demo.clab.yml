name: ngclf-demo

prefix: ""
topology:
  defaults:
    kind: nokia_srlinux
  kinds:
    nokia_srlinux:
      type: ixr-d2l
      image: ghcr.io/nokia/srlinux:25.10.1
      startup-config: startup.cfg
    linux:
      image: ghcr.io/srl-labs/network-multitool
  nodes:
    clf1:
    clf2:
    clf3:
    csp1:
    csp2:
    cgr1:
    cgr2:
    internet:
    ot1:
      kind: linux
      exec:
        - ip address add 192.168.10.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.10.254
    ot2:
      kind: linux
      exec:
        - ip address add 192.168.20.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.20.254
    ot3:
      kind: linux
      exec:
        - ip address add 192.168.30.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.30.254
    ot4:
      kind: linux
      exec:
        - ip address add 192.168.20.4/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.20.254
    ot5:
      kind: linux
      exec:
        - ip address add 192.168.20.5/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.20.254
    ot6:
      kind: linux
      exec:
        - ip address add 192.168.101.1/24 dev eth1
        - ip route add 0.0.0.0/0 via 192.168.101.254
    client:
      kind: linux
      exec:
        - ip address add 192.168.70.1/31 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.70.0
  links:
      # spine-leaf links
    - endpoints: ["clf1:e1-1", "csp1:e1-1"]
    - endpoints: ["clf2:e1-1", "csp1:e1-2"]
    - endpoints: ["clf3:e1-1", "csp1:e1-3"]
    - endpoints: ["clf1:e1-11", "csp2:e1-1"]
    - endpoints: ["clf2:e1-12", "csp2:e1-2"]
    - endpoints: ["clf3:e1-13", "csp2:e1-3"]
    - endpoints: ["csp1:e1-10", "cgr1:e1-10"]
    - endpoints: ["csp1:e1-11", "cgr2:e1-11"]
    - endpoints: ["csp2:e1-11", "cgr1:e1-11"]
    - endpoints: ["csp2:e1-10", "cgr2:e1-10"]
    - endpoints: ["internet:e1-13", "cgr1:e1-13"]
    - endpoints: ["internet:e1-14", "cgr2:e1-14"]
      # leaf-client links
    - endpoints: ["ot1:eth1","clf1:e1-25"]
    - endpoints: ["ot2:eth1","clf1:e1-26"]
    - endpoints: ["ot3:eth1","clf2:e1-25"]
    - endpoints: ["ot4:eth1","clf2:e1-26"]
    - endpoints: ["ot5:eth1","clf3:e1-25"]
    - endpoints: ["ot6:eth1","clf3:e1-26"]
    - endpoints: ["client:eth1","internet:e1-25"]
